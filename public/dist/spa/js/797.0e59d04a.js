(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[797],{797:(e,t,a)=>{"use strict";a.r(t),a.d(t,{alertsCustom:()=>w,default:()=>j});var s=a(3673),n=a(2323),o=a(8880);const l=(0,s.HX)("data-v-7a4e9280");(0,s.dD)("data-v-7a4e9280");const r={class:"container bg-custom"},i={class:"abs-center"},u={class:"text-h5 text-center"},d={class:"q-mt-lg"},c=(0,s.Wm)("span",null," o ",-1);(0,s.Cn)();const m=l(((e,t,a,m,p,g)=>{const f=(0,s.up)("q-resize-observer"),v=(0,s.up)("q-img"),y=(0,s.up)("q-input"),h=(0,s.up)("q-icon"),w=(0,s.up)("q-file"),q=(0,s.up)("q-btn"),b=(0,s.up)("q-form"),x=(0,s.up)("q-card-section"),W=(0,s.up)("q-card"),k=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(k,null,{default:l((()=>[(0,s.Wm)("div",r,[(0,s.Wm)(f,{onResize:e.onResize},null,8,["onResize"]),(0,s.Wm)("div",i,[(0,s.Wm)(W,{class:"my-card q-m-lg",flat:"",bordered:""},{default:l((()=>[(0,s.Wm)(x,{horizontal:e.windowWidth>400},{default:l((()=>[e.isRegister?((0,s.wg)(),(0,s.j4)(v,{key:0,class:"col-5",src:"https://cdn.quasar.dev/img/parallax2.jpg"})):(0,s.kq)("",!0),(0,s.Wm)(x,null,{default:l((()=>[(0,s.Wm)("h4",u,(0,n.zw)(e.textContextTitle),1),(0,s.Wm)(b,{onSubmit:(0,o.iM)(e.validateValues,["prevent"])},{default:l((()=>[(0,s.Wm)(y,{class:"q-mt-sm",dense:!0,rounded:"",type:"text",outlined:"",modelValue:e.user.username,"onUpdate:modelValue":t[1]||(t[1]=t=>e.user.username=t),label:"Usuario",rules:[e=>e&&e.length>0||"Introduce tu nombre de usuario"]},null,8,["modelValue","rules"]),e.isRegister?((0,s.wg)(),(0,s.j4)(y,{key:0,class:"q-mt-sm",dense:!0,rounded:"",type:"emaiil",outlined:"",modelValue:e.user.email,"onUpdate:modelValue":t[2]||(t[2]=t=>e.user.email=t),label:"Correo electrónico",rules:[e=>e&&e.length>0&&e.includes("@")||"Introduce tu correo"]},null,8,["modelValue","rules"])):(0,s.kq)("",!0),(0,s.Wm)(y,{class:"q-mt-sm q-mb-sm",dense:!0,rounded:"",type:"password",outlined:"",modelValue:e.user.password,"onUpdate:modelValue":t[3]||(t[3]=t=>e.user.password=t),label:"Contraseña...",rules:[e=>e&&e.length>0||"Introduce tu contraseña"]},null,8,["modelValue","rules"]),e.isRegister?((0,s.wg)(),(0,s.j4)(w,{key:1,class:"q-mt-sm q-mb-sm",dense:!0,rounded:"",outlined:"","bottom-slots":"",modelValue:e.file,"onUpdate:modelValue":t[5]||(t[5]=t=>e.file=t),label:"Selecciona una foto de perfil",counter:"","max-files":"1"},{append:l((()=>[null!==e.file?((0,s.wg)(),(0,s.j4)(h,{key:0,name:"close",onClick:t[4]||(t[4]=(0,o.iM)((t=>e.file=null),["stop"])),class:"cursor-pointer"})):(0,s.kq)("",!0)])),_:1},8,["modelValue"])):(0,s.kq)("",!0),(0,s.Wm)("span",d,[(0,s.Wm)(q,{push:"",type:"submit",color:"primary",label:e.textContextTitle},null,8,["label"]),c,(0,s.Wm)("a",{onClick:t[6]||(t[6]=t=>e.isRegister=!e.isRegister),class:"text-blue"},(0,n.zw)(e.textContextTitleOpposite),1)])])),_:1},8,["onSubmit"])])),_:1}),e.isRegister?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(v,{key:1,class:"col-5",src:"https://cdn.quasar.dev/img/parallax2.jpg"}))])),_:1},8,["horizontal"])])),_:1})])])])),_:1})}));var p=a(1959),g=a(9582),f=a(52),v=a.n(f),y=a(8825),h=a(51);const w=()=>{const e=(0,y.Z)(),t=t=>e.notify({type:"positive",message:t}),a=t=>e.notify({type:"warning",message:t}),s=t=>e.notify({type:"negative",message:t}),n=t=>e.notify({type:"info",message:t});return{notifySuccess:t,notifyError:s,notifyWarning:a,notifyInfo:n}},q=(0,s.aZ)({name:"PageAbout",setup(){const{notifySuccess:e,notifyError:t,notifyWarning:a}=w(),n=(0,g.tv)(),o=(0,p.qj)({username:"",password:"",email:""}),l=(0,p.iH)(null),r=(0,p.iH)(window.innerWidth),i=(0,p.iH)(!1),u=(0,s.Fl)((()=>i.value?"Registrarse":"Iniciar sesión")),d=(0,s.Fl)((()=>i.value?"Iniciar sesión":"Registrarse"));function c(e){r.value=e.width}function m(){if(i.value){if(!l.value)return a("Selecciona una imagen de perfil para continuar");var s=new FormData;s.append("username",o.username),s.append("password",o.password),s.append("email",o.email),s.append("file",l.value),s.append("roles",JSON.stringify(["admin"])),v().post("http://localhost:3000/auth/register",s).then((t=>{200==t.status?(e("Registrado con exito"),i.value=!1):a("Valida tus datos")})).catch((()=>{t("Ha ocurrido un error inesperado, por favor intenta mas tarde.")}))}else v().post("http://localhost:3000/auth/login",{username:o.username,password:o.password}).then((t=>{if(200==t.status){if(t.data&&t.data.accessToken){localStorage.setItem("user",JSON.stringify(t.data));var s=t.data.accessToken,o=(0,h.Z)(s);localStorage.setItem("userInfo",JSON.stringify(o))}e("Logueado con exito"),n.go(NaN)}else a("Valida tus datos")})).catch((()=>{t("Ha ocurrido un error inesperado, por favor intenta mas tarde.")}))}return(0,s.bv)((()=>{const e=localStorage.getItem("user");if(e)return n.push("/")})),{windowWidth:r,onResize:c,user:o,file:l,validateValues:m,isRegister:i,textContextTitle:u,textContextTitleOpposite:d}}});var b=a(4379),x=a(5151),W=a(151),k=a(5589),V=a(4027),C=a(8689),R=a(2426),I=a(4816),S=a(4554),Z=a(4607),z=a(7518),Q=a.n(z);q.render=m,q.__scopeId="data-v-7a4e9280";const j=q;Q()(q,"components",{QPage:b.Z,QResizeObserver:x.Z,QCard:W.Z,QCardSection:k.Z,QImg:V.Z,QForm:C.Z,QInput:R.Z,QFile:I.Z,QIcon:S.Z,QBtn:Z.Z})}}]);